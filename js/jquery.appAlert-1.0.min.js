(function(a){function b(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++){c=e[b].substr(0,e[b].indexOf("="));d=e[b].substr(e[b].indexOf("=")+1);c=c.replace(/^\s+|\s+$/g,"");if(c==a){return unescape(d)}}return"1"}a.appalert=function(c,d){var e=b("__appAlertValue").toString();document.cookie="__appAlertValue = "+(parseInt(e)+1).toString();var f=a(document).height();var g=a(document).width();var h={title:"",message:"",confirm:false,input:false,input_placeholder:"",animate:false,animateSpeed:"normal",textOk:"Ok",textCancel:"Cancel",overlay:true,applybuttons:true,timeout:5e3,width:0,onSuccess:function(a){return a}};var i=this;i.settings={};i.aText="";var j=a(d),d=d;i.init=function(){i.settings=a.extend({},h,c);a("<div/>").addClass("__appOuter").attr("id","a-Window-"+e).prependTo("body");if(i.settings.overlay){a("<div/>").attr("id","a-Overlay-"+e).addClass("__appOverlay").css("height",f).css("width",g).fadeIn(100).prependTo("body")}a("<div/>").addClass("__appInner").attr("id","a-WindowInner-"+e).appendTo("#a-Window-"+e);if(j.html()!=null){a("#a-WindowInner-"+e).html(j.html());a("#a-Window-"+e).css({"min-width":j.width()+"px"});j.hide()}else{var b="";if(i.settings.title!=""){b+="<h2>"+i.settings.title+"</h2>"}if(i.settings.width>0){b+='<div style="width:'+i.settings.width+'px;">'+i.settings.message+"</div>"}else{b+=i.settings.message}a("#a-WindowInner-"+e).html(b)}a("#a-Window-"+e).css({left:(a(window).width()-a("#a-Window-"+e).width())/2+a(window).scrollLeft()+"px"});a("#a-Overlay-"+e+", #a-Window-"+e).show();if(i.settings.animate){var d;if(isNaN(i.settings.animateSpeed)){switch(i.settings.animateSpeed){case"slow":d=800;break;case"normal":d=500;break;case"fast":d=300;break;default:d=500}}else if(i.settings.animateSpeed==""){d=500}else{d=i.settings.animateSpeed}a("#a-Window-"+e).css("top","-200px").show().animate({top:"100px"},d)}else{a("#a-Window-"+e).css("top","100px").fadeIn(100)}if(i.settings.input){if(typeof i.settings.input=="string"){a("<div/>").addClass("__appInput").html('<input type="text" class="__appTextbox" id="a-Textbox-'+e+'" value="'+i.settings.input+'" placeholder="'+i.settings.input_placeholder+'" />').appendTo("#a-WindowInner-"+e)}else{a("<div/>").addClass("__appInput").html('<input type="text" class="__appTextbox" id="a-Textbox-'+e+'" placeholder="'+i.settings.input_placeholder+'" />').appendTo("#a-WindowInner-"+e)}a("#a-Textbox-"+e).focus()}if(i.settings.applybuttons){a("<div />").addClass("__appButtons").attr("id","a-Buttons-"+e).appendTo("#a-WindowInner-"+e);if(i.settings){a("#a-Buttons-"+e).append('<button value="ok" rel="'+e+'">'+i.settings.textOk+"</button>");if(i.settings.confirm||i.settings.input){a("#a-Buttons-"+e).append('<button value="cancel" rel="'+e+'">'+i.settings.textCancel+"</button>")}}a(document).keydown(function(b){if(a("#a-Overlay-"+e).is(":visible")){if(b.keyCode==13){a("#a-Buttons-"+e+' > button[value="ok"]').click()}if(b.keyCode==27){a("#a-Buttons-"+e+' > button[value="cancel"]').click()}}})}i.aText=a("#a-Textbox-"+e).val();if(!i.aText){i.aText=false}a("#a-Textbox-"+e).keyup(function(){i.aText=a(this).val()});if(i.settings.applybuttons){a("#a-Buttons-"+e+" > button").live("click",k);function k(){a("#a-Overlay-"+a(this).attr("rel")+", #a-Window-"+a(this).attr("rel")).remove();var b=false;if(a(this).attr("value")=="ok"){if(i.settings){if(i.settings.input){b=i.aText}else{b=true}}else{b=false}}else if(a(this).attr("value")=="cancel"){b=false}else{b=false}i.settings.onSuccess(b)}}else{if(i.settings.timeout>0){a("#a-Overlay-"+e+", #a-Window-"+e).delay(i.settings.timeout).fadeOut(1e3)}}};i.init()};a.fn.appalert=function(b){return this.each(function(){var c=a(this);var d=new a.appalert(b,this);c.data("appalert",d)})}})(jQuery)